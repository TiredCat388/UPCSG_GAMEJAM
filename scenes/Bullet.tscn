[gd_scene load_steps=3 format=3 uid="uid://bnjnuo7fgelbo"]

[sub_resource type="GDScript" id="GDScript_2ropf"]
script/source = "extends Area2D

@export var speed: float = 10000.0
@export var color: Color = Color(1, 1, 0) # Yellow

var direction: Vector2 = Vector2.RIGHT
var radius: float = 4.0
# TODO: Bullet pooling
func _ready():
	# If there's a CollisionShape2D child with a CircleShape2D, use its radius
	var collision_shape = $CollisionShape2D.shape
	if collision_shape is CircleShape2D:
		radius = collision_shape.radius
	queue_redraw() # draw circle once ready IMPORTANT TODO: use sprite instead of this for performance

func _draw():
	draw_circle(Vector2.ZERO, radius, color)

func _physics_process(delta):
	# Move the bullet
	global_position += direction * speed * delta

	# Get the current viewport rectangle
	var viewport_rect = get_viewport().get_visible_rect()

	# If bullet is outside, remove it
	if not viewport_rect.has_point(global_position):
		queue_free()
"

[sub_resource type="CircleShape2D" id="CircleShape2D_2ropf"]
radius = 9.055386

[node name="Bullet" type="Area2D"]
z_index = -1
script = SubResource("GDScript_2ropf")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_2ropf")
